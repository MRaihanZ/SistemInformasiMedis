<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>GO Pasien</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
			crossorigin="anonymous"
		/>
	</head>
	<body>
		<!-- Navar -->
		<nav class="navbar navbar-expand-lg bg-dark">
			<div class="container">
				<a class="navbar-brand text-light" href="/">Go Pasien</a>
				<button
					class="navbar-toggler"
					type="button"
					data-bs-toggle="collapse"
					data-bs-target="#navbarNav"
					aria-controls="navbarNav"
					aria-expanded="false"
					aria-label="Toggle navigation"
				>
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarNav">
					<ul class="navbar-nav ms-auto">
						<li class="nav-item pe-3">
							<a
								class="nav-link active text-light"
								aria-current="page"
								href="/pasien"
								>Pasien</a
							>
						</li>
						<li class="nav-item">
							<a class="nav-link active text-light" href="/pasien/add">Add</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>
		<!-- End of Navbar -->

		<div class="container mt-3">
			<h2>List Pasien</h2>
			<hr />
			<div class="row mb-3">
				<div class="col-md-6">
					<a href="/pasien/add" class="btn btn-primary">Add Pasien</a>
				</div>
				<div class="col-md-6">
					<div class="input-group">
						<input
							type="text"
							class="form-control"
							id="searchID"
							placeholder="Recipient's ID"
							aria-label="Recipient's ID"
							aria-describedby="searchBtn"
						/>
						<button
							class="btn btn-outline-primary"
							type="button"
							id="searchBtn"
						>
							Search
						</button>
						<button class="btn btn-outline-primary" type="button" id="printBtn">
							Print
						</button>
					</div>
				</div>
			</div>
			<table class="table table-bordered mt-2 text-center">
				<thead>
					<tr>
						<th>No</th>
						<th>Id</th>
						<th>Name</th>
						<th>Category</th>
						<th>Doctor</th>
						<th>Diagnose</th>
						<th>Description</th>
						<th>Medicine</th>
						<th>Date</th>
						<th>Action</th>
					</tr>
				</thead>
				<tbody>
					{{range $index, $record := .records}}
					<tr>
						<td>{{$index}}</td>
						<td>{{ .Pasien.Id }}</td>
						<td>{{.Pasien.Name}}</td>
						<td>{{.Category.Name}}</td>
						<td>{{ .Doctor.Name }}</td>
						<td>{{ .Diagnose }}</td>
						<td>{{ .Description }}</td>
						<td>{{ .Medicine.Name }}</td>
						<td>{{ .CreatedAt }}</td>
						<td>
							<a
								href="pasien?id={{.Pasien.Id}}"
								class="btn btn-sm btn-success text-light"
								>Record</a
							>
							<a
								href="/pasien/detail?id={{.Id}}"
								class="btn btn-sm btn-info text-light"
								>Detail</a
							>
							<a
								href="/pasien/edit?id={{.Id}}"
								class="btn btn-sm btn-warning text-light"
								>Edit</a
							>
							<a
								href="/pasien/delete?id={{.Id}}"
								onclick="return confirm('Are you sure want to delete this product ?')"
								class="btn btn-sm btn-danger"
								>Delete</a
							>
						</td>
					</tr>
					{{end}}
				</tbody>
			</table>
		</div>
		<script>
			const searchBtn = document.getElementById("searchBtn");
			const searchID = document.getElementById("searchID");

			searchID.addEventListener("keypress", function (e) {
				if (e.key === "Enter") {
					searchBtn.click();
				}
			});
			searchBtn.addEventListener("click", () => {
				const value = searchID.value;
				window.location.href = "http://localhost:8080/pasien?id=" + value;
			});

			document.getElementById("printBtn").addEventListener("click", () => {
				const value = searchID.value;
				window.location.href = "http://localhost:8080/print?id=" + value;
			});
		</script>
	</body>
</html>
